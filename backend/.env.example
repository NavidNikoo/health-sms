# ============================================================
# Health SMS — Environment Variables
# ============================================================
# Copy this file to .env and fill in the values.
#   cp .env.example .env
#
# LOCAL DEVELOPMENT defaults are shown. For AWS production,
# replace with your RDS endpoint, strong secrets, etc.
# ============================================================

# --- PostgreSQL ---------------------------------------------------
PGHOST=localhost                              # RDS endpoint for production
PGPORT=5432
PGUSER=your_pg_user                           # RDS master username
PGPASSWORD=                                   # RDS master password (leave blank locally if using peer auth)
PGDATABASE=health_sms

# --- Server -------------------------------------------------------
PORT=3000
FRONTEND_ORIGIN=http://localhost:5173         # CloudFront URL for production (https://dXXXXX.cloudfront.net)

# --- Auth (JWT) ---------------------------------------------------
JWT_SECRET=change-this-to-a-random-string-at-least-32-chars
JWT_EXPIRES_IN=24h

# --- Twilio (SMS + Voice) -----------------------------------------
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=

# --- Twilio Voice (Phase 2) ---------------------------------------
# 1. Create a TwiML App in Twilio Console → Voice → TwiML Apps
#    Set Voice Request URL: https://yourapi.com/api/voice/twiml/outbound (POST)
#    Copy the SID (AP...) here:
TWILIO_TWIML_APP_SID=

# 2. Create API Keys in Twilio Console → Account → API Keys & Tokens
#    (Standard key, not restricted)
TWILIO_API_KEY_SID=
TWILIO_API_KEY_SECRET=

# 3. Your backend's public URL — used when provisioning numbers to auto-configure
#    Twilio webhook URLs. For local dev, use ngrok: https://xxxx.ngrok.io
BASE_URL=

# --- AWS SSM Parameter Store (production only) --------------------
# Set this on the EC2 instance (e.g. in ecosystem.config.js env block)
# instead of shipping a .env file to the server.
# The app will fetch ALL parameters under this prefix at startup and
# inject them as environment variables. Leave blank for local dev.
#
# Example: AWS_SSM_PREFIX=/health-sms/prod/
#   -> SSM parameter /health-sms/prod/PGPASSWORD becomes process.env.PGPASSWORD
#
# Required IAM permissions on the EC2 instance role:
#   ssm:GetParametersByPath on arn:aws:ssm:<region>:<acct>:parameter/health-sms/prod/*
#   kms:Decrypt on the KMS key used for SecureString parameters
AWS_SSM_PREFIX=
AWS_REGION=us-east-1
